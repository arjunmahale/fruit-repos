<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fruitables - Shop</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      :root {
        --primary-bg: #495449;
        --secondary-bg: #3c423c;
        --text-color: #b0b0b0;
        --heading-color: #ffffff;
        --btn-bg: #90b355;
        --btn-text: #ffffff;
        --social-bg: #5f665f;
        --social-link: #ffffff;
        --theme-color: #81c408;
        --secondary-theme-color: #ffb524;
      }

      body {
        font-family: "Arial", sans-serif;
        background-color: #f8f9fa;
      }

      .sec1 {
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .navbar-brand {
        font-size: 2.5rem;
        color: var(--theme-color) !important;
        font-weight: bold;
      }

      .nav-link {
        font-size: 1.1rem;
        font-weight: 500;
        color: #6c757d !important;
        margin-right: 15px;
      }

      .nav-link.active {
        color: var(--theme-color) !important;
      }

      .icon-btn1,
      .cart-icon1 {
        border: 1px solid var(--secondary-theme-color);
        border-radius: 50%;
        width: 45px;
        height: 45px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--theme-color);
        position: relative;
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .cart-icon1 {
        background-color: var(--theme-color);
        color: #fff;
      }

      .icon-btn1:hover {
        background-color: var(--theme-color);
        color: #fff;
      }

      .cart-icon1:hover {
        opacity: 0.8;
      }

      .cart-badge1 {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: var(--secondary-theme-color);
        color: white;
        border-radius: 50%;
        padding: 0 6px;
        font-size: 0.75rem;
      }

      .header {
        height: 200px;
        background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)),
          url("cart-page-header-img.jpg");
        background-size: cover;
        background-position: center;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 5rem;
      }

      .header h1 {
        color: white;
        font-size: 50px;
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .filter-container {
        padding: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      .form-control:focus,
      .btn-search:focus {
        box-shadow: none;
        border-color: #ced4da;
      }

      .btn-search {
        background-color: #e9ecef;
        border: 1px solid #ced4da;
        color: #495057;
      }

      .list-group-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border: none;
        cursor: pointer;
      }

      .list-group-item:hover {
        color: #0d6efd;
      }

      .list-group-item.active {
        color: var(--theme-color) !important;
        font-weight: bold;
      }

      .fruit-icon {
        color: #28a745;
        margin-right: 10px;
      }

      .product-card {
        border-radius: 15px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        overflow: hidden;
        border: 2px solid #28a745;
        background: white;
        height: 100%;
      }

      .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      }

      .product-image {
        height: 200px;
        background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 4rem;
        color: var(--theme-color);
        position: relative;
      }

      .product-tag {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: #28a745;
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .product-title {
        font-size: 1.25rem;
        font-weight: bold;
        color: #343a40;
        margin-bottom: 0.5rem;
      }

      .product-description {
        font-size: 0.9rem;
        color: #6c757d;
        margin-bottom: 1rem;
      }

      .product-price {
        font-size: 1.25rem;
        font-weight: bold;
        color: #28a745;
      }

      .btn-add-to-cart {
        background-color: white;
        color: #28a745;
        border: 2px solid #28a745;
        border-radius: 25px;
        font-weight: bold;
        padding: 8px 16px;
        text-decoration: none;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .btn-add-to-cart:hover {
        background-color: #28a745;
        color: white;
      }

      .cart-sidebar {
        width: 400px;
        background-color: #353432;
        color: #eee;
        position: fixed;
        top: 0;
        right: -400px;
        bottom: 0;
        display: grid;
        grid-template-rows: 70px 1fr 70px;
        transition: 0.5s ease;
        z-index: 9999;
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
      }

      body.show-cart .cart-sidebar {
        right: 0;
      }

      .cart-header {
        padding: 20px;
        margin: 0;
        font-weight: 300;
        border-bottom: 1px solid #555;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .cart-close {
        background: none;
        border: none;
        color: #eee;
        font-size: 1.5rem;
        cursor: pointer;
      }

      .cart-items {
        overflow-y: auto;
        padding: 10px;
      }

      .cart-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        padding: 15px 10px;
        border-bottom: 1px solid #555;
      }

      .cart-item img {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
      }

      .cart-item-name {
        font-size: 0.9rem;
        color: #eee;
        flex-grow: 1;
      }

      .cart-item-price {
        font-weight: bold;
        color: var(--theme-color);
        white-space: nowrap;
      }

      .quantity-controls {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .quantity-btn {
        width: 25px;
        height: 25px;
        background-color: var(--theme-color);
        border: none;
        border-radius: 50%;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
      }

      .quantity-display {
        color: #eee;
        margin: 0 5px;
        min-width: 20px;
        text-align: center;
      }

      .cart-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      .cart-btn {
        background-color: var(--theme-color);
        border: none;
        font-weight: 500;
        cursor: pointer;
        padding: 20px;
        color: white;
        transition: background-color 0.3s;
      }

      .cart-btn.close-btn {
        background-color: #6c757d;
      }

      .cart-btn:hover {
        opacity: 0.9;
      }

      .footer {
        background-color: var(--primary-bg);
        color: var(--text-color);
        padding: 50px 0;
      }

      .social-icons a {
        color: var(--social-link);
        background-color: var(--social-bg);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        margin: 0 5px;
        text-decoration: none;
      }

      .footer h4 {
        color: var(--heading-color);
        font-weight: bold;
        margin-bottom: 20px;
      }

      .footer .btn-link {
        color: var(--text-color);
        text-decoration: none;
        line-height: 2;
      }

      @media (max-width: 768px) {
        .header {
          height: 150px;
          margin-top: 4rem;
        }
        .header h1 {
          font-size: 36px;
        }
        .cart-sidebar {
          width: 100%;
          right: -100%;
        }
        .navbar-collapse {
          background: white;
          padding: 10px;
          border-radius: 8px;
        }
        .navbar-nav .nav-item {
          border-bottom: 1px solid #eee;
        }
      }
    </style>
  </head>
  <body>
    <div class="sec1">
      <nav class="navbar navbar-expand-lg bg-light p-3 fixed-top">
        <div class="container-fluid">
          <a class="navbar-brand fw-bold" href="#">Fruitables</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
              <li class="nav-item">
                <a class="nav-link active" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="Shop.html">Shop</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="shop_detail.html">Shop Detail</a>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownPages"
                  role="button"
                  data-bs-toggle="dropdown"
                >
                  Pages
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">Cart</a></li>
                  <li><a class="dropdown-item" href="#">Checkout</a></li>
                  <li>
                    <a class="dropdown-item" href="Testimonial.html"
                      >Testimonial</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="404_page.html">404 Page</a>
                  </li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="Contact.html">Contact</a>
              </li>
            </ul>
          </div>
          <div class="d-flex align-items-center">
            <a href="#" class="icon-btn1 me-2 d-none d-lg-block">
              <i class="fa-solid fa-magnifying-glass"></i>
            </a>
            <a
              href="#"
              class="cart-icon1 position-relative me-2"
              id="cart-toggle"
            >
              <i class="fa-solid fa-shopping-bag"></i>
              <span class="cart-badge1" id="cart-count">0</span>
            </a>
            <a href="#" class="cart-icon1 d-none d-lg-block">
              <i class="fa-solid fa-user"></i>
            </a>
          </div>
        </div>
      </nav>
    </div>

    <div class="header">
      <h1>Shop</h1>
    </div>

    <div class="container py-5">
      <div class="row g-4">
        <div class="col-lg-3">
          <div class="filter-container">
            <h5 class="text-start">Fresh fruits shop</h5>
            <div class="input-group mb-3">
              <input
                type="text"
                class="form-control"
                id="search-input"
                placeholder="keywords"
                aria-label="keywords"
              />
              <button class="btn btn-search" type="button">
                <i class="fas fa-search"></i>
              </button>
            </div>

            <h5 class="mt-4 mb-3">Categories</h5>
            <ul class="list-group list-group-flush" id="category-list"></ul>

            <h5 class="mt-4 mb-3">Additional</h5>
            <div id="additional-filters">
              <div class="form-check mb-2">
                <input
                  class="form-check-input"
                  type="radio"
                  name="additionalRadio"
                  id="organicRadio"
                  value="isOrganic"
                  checked
                />
                <label class="form-check-label" for="organicRadio"
                  >Organic</label
                >
              </div>
              <div class="form-check mb-2">
                <input
                  class="form-check-input"
                  type="radio"
                  name="additionalRadio"
                  id="freshRadio"
                  value="isFresh"
                />
                <label class="form-check-label" for="freshRadio">Fresh</label>
              </div>
              <div class="form-check mb-2">
                <input
                  class="form-check-input"
                  type="radio"
                  name="additionalRadio"
                  id="salesRadio"
                  value="isSales"
                />
                <label class="form-check-label" for="salesRadio">Sales</label>
              </div>
              <div class="form-check mb-2">
                <input
                  class="form-check-input"
                  type="radio"
                  name="additionalRadio"
                  id="discountRadio"
                  value="isDiscount"
                />
                <label class="form-check-label" for="discountRadio"
                  >Discount</label
                >
              </div>
              <div class="form-check mb-2">
                <input
                  class="form-check-input"
                  type="radio"
                  name="additionalRadio"
                  id="expiredRadio"
                  value="isExpired"
                />
                <label class="form-check-label" for="expiredRadio"
                  >Expired</label
                >
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-9">
          <div class="text-center mb-5">
            <h2 class="display-6 mb-3">Our Products</h2>
            <p class="text-muted">
              Fresh and organic products delivered to your door
            </p>
          </div>
          <div id="products-container" class="row g-4">
            <div class="loading text-center w-100">
              <i class="fas fa-spinner fa-spin me-2"></i>
              Loading products...
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="cart-sidebar" id="cart-sidebar">
      <div class="cart-header">
        <h3>Shopping Cart</h3>
        <button class="cart-close" id="cart-close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="cart-items" id="cart-items">
        <div class="text-center text-muted mt-5">
          <i class="fas fa-shopping-cart fa-3x mb-3"></i>
          <p>Your cart is empty</p>
        </div>
      </div>
      <div class="cart-buttons">
        <button class="cart-btn close-btn" id="close-cart">CLOSE</button>
        <button class="cart-btn" id="checkout">CHECK OUT</button>
      </div>
    </div>

    <hr />

    <footer class="footer">
      <div class="container-fluid py-5">
        <div class="container">
          <div class="row g-5">
            <div class="col-lg-3 col-md-6 d-flex align-items-center">
              <div class="logo">
                <h1 class="text-info display-6 mb-0">Fruitables</h1>
                <p class="text-white-50">Fresh products</p>
              </div>
            </div>
            <div
              class="col-lg-6 col-md-6 d-flex align-items-center justify-content-center"
            >
              <div class="input-group">
                <input
                  type="email"
                  class="form-control rounded-pill border-0 py-3 ps-4 pe-5"
                  placeholder="Your Email"
                />
                <button
                  type="button"
                  class="btn text-white py-3 px-4"
                  style="
                    background-color: var(--btn-bg);
                    border-radius: 0 50px 50px 0;
                    margin-left: -50px;
                    z-index: 1;
                  "
                >
                  Subscribe Now
                </button>
              </div>
            </div>
            <div
              class="col-lg-3 col-md-6 d-flex justify-content-end align-items-center"
            >
              <div class="d-flex social-icons">
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-linkedin-in"></i></a>
              </div>
            </div>
          </div>
          <hr class="my-4" style="border-color: #5f665f" />
          <div class="row g-5">
            <div class="col-lg-3 col-md-6">
              <div class="footer-item">
                <h4 class="text-white mb-4">Why People Like Us!</h4>
                <p>
                  Typesetting, remaining essentially unchanged. It was
                  popularised in the 1960s with the like Aldus PageMaker
                  including of Lorem Ipsum.
                </p>
                <a
                  href="#"
                  class="btn border-secondary rounded-pill text-white py-3 px-5 mt-4"
                  style="background-color: var(--btn-bg)"
                  >Read More</a
                >
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="d-flex flex-column text-start footer-item">
                <h4 class="text-white mb-4">Shop Info</h4>
                <a class="btn-link text-white-50" href="#">About Us</a>
                <a class="btn-link text-white-50" href="#">Contact Us</a>
                <a class="btn-link text-white-50" href="#">Privacy Policy</a>
                <a class="btn-link text-white-50" href="#">Terms & Condition</a>
                <a class="btn-link text-white-50" href="#">Return Policy</a>
                <a class="btn-link text-white-50" href="#">FAQs & Help</a>
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="d-flex flex-column text-start footer-item">
                <h4 class="text-white mb-4">Account</h4>
                <a class="btn-link text-white-50" href="#">My Account</a>
                <a class="btn-link text-white-50" href="#">Shop details</a>
                <a class="btn-link text-white-50" href="#">Shopping Cart</a>
                <a class="btn-link text-white-50" href="#">Wishlist</a>
                <a class="btn-link text-white-50" href="#">Order History</a>
                <a class="btn-link text-white-50" href="#"
                  >International Orders</a
                >
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="footer-item">
                <h4 class="text-white mb-4">Contact</h4>
                <p>Address: 1429 Netus Rd, NY 48247</p>
                <p>Email: Example@gmail.com</p>
                <p>Phone: +0123 4567 8910</p>
                <p class="mb-3">Payment Accepted</p>
                <div class="payment-icons">
                  <span class="badge bg-primary me-1">VISA</span>
                  <span class="badge bg-warning me-1">MC</span>
                  <span class="badge bg-info me-1">AMEX</span>
                  <span class="badge bg-success">PayPal</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const sampleProducts = [
        {
          id: 1,
          name: "Apples",
          price: 4.99,
          category: "Fruit",
          icon: "🍎",
          isOrganic: true,
          isFresh: true,
          isSales: false,
          isDiscount: false,
          isExpired: false,
        },
        {
          id: 2,
          name: "Bananas",
          price: 3.99,
          category: "Fruit",
          icon: "🍌",
          isOrganic: true,
          isFresh: true,
          isSales: false,
          isDiscount: false,
          isExpired: false,
        },
        {
          id: 3,
          name: "Broccoli",
          price: 5.99,
          category: "Vegetable",
          icon: "🥦",
          isOrganic: true,
          isFresh: false,
          isSales: false,
          isDiscount: true,
          isExpired: false,
        },
        {
          id: 4,
          name: "Tomatoes",
          price: 6.99,
          category: "Vegetable",
          icon: "🍅",
          isOrganic: true,
          isFresh: true,
          isSales: true,
          isDiscount: false,
          isExpired: false,
        },
        {
          id: 5,
          name: "Oranges",
          price: 5.49,
          category: "Fruit",
          icon: "🍊",
          isOrganic: false,
          isFresh: true,
          isSales: false,
          isDiscount: false,
          isExpired: false,
        },
        {
          id: 6,
          name: "Lettuce",
          price: 2.99,
          category: "Vegetable",
          icon: "🥬",
          isOrganic: false,
          isFresh: true,
          isSales: true,
          isDiscount: false,
          isExpired: false,
        },
        {
          id: 7,
          name: "Carrots",
          price: 3.49,
          category: "Vegetable",
          icon: "🥕",
          isOrganic: false,
          isFresh: false,
          isSales: false,
          isDiscount: true,
          isExpired: true,
        },
        {
          id: 8,
          name: "Grapes",
          price: 7.99,
          category: "Fruit",
          icon: "🍇",
          isOrganic: false,
          isFresh: true,
          isSales: false,
          isDiscount: false,
          isExpired: false,
        },
        {
          id: 9,
          name: "Watermelon",
          price: 8.99,
          category: "Fruit",
          icon: "🍉",
          isOrganic: true,
          isFresh: true,
          isSales: false,
          isDiscount: false,
          isExpired: false,
        },
        {
          id: 10,
          name: "Onions",
          price: 2.5,
          category: "Vegetable",
          icon: "🧅",
          isOrganic: true,
          isFresh: false,
          isSales: false,
          isDiscount: false,
          isExpired: false,
        },
      ];

      let products = [];
      let cart = [];

      const cartToggle = document.getElementById("cart-toggle");
      const cartClose = document.getElementById("cart-close");
      const closeCart = document.getElementById("close-cart");
      const cartSidebar = document.getElementById("cart-sidebar");
      const cartCount = document.getElementById("cart-count");
      const cartItems = document.getElementById("cart-items");
      const productsContainer = document.getElementById("products-container");
      const searchInput = document.getElementById("search-input");
      const categoryList = document.querySelector("#category-list");
      const additionalFilters = document.getElementById("additional-filters");
      const body = document.body;

      if (cartToggle) cartToggle.addEventListener("click", toggleCart);
      if (cartClose) cartClose.addEventListener("click", toggleCart);
      if (closeCart) closeCart.addEventListener("click", toggleCart);
      if (searchInput) searchInput.addEventListener("input", searchProducts);
      if (additionalFilters)
        additionalFilters.addEventListener("change", filterByAdditional);

      function toggleCart() {
        body.classList.toggle("show-cart");
      }

      function initApp() {
        products = sampleProducts;
        renderCategories();
        renderProducts(products);
        loadCartFromStorage();
      }

      function renderProducts(filteredProducts) {
        if (filteredProducts.length === 0) {
          productsContainer.innerHTML =
            '<div class="text-center w-100">No products match your criteria.</div>';
          return;
        }

        const productsHTML = filteredProducts
          .map(
            (product) => `
                <div class="col-12 col-sm-6 col-md-6 col-lg-4 mb-4">
                    <div class="card product-card h-100">
                        <div class="product-image position-relative">
                            <div class="product-icon">${product.icon}</div>
                            <span class="product-tag">${product.category}</span>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="product-title">${product.name}</h5>
                            <p class="product-description flex-grow-1">Fresh and organic ${product.name.toLowerCase()} delivered daily</p>
                            <div class="d-flex justify-content-between align-items-center mt-auto">
                                <span class="product-price">$${product.price.toFixed(
                                  2
                                )}</span>
                                <button class="btn-add-to-cart" onclick="addToCart(${
                                  product.id
                                })">
                                    Add to cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                `
          )
          .join("");

        productsContainer.innerHTML = productsHTML;
      }

      function renderCategories() {
        const categories = {};
        sampleProducts.forEach((product) => {
          const category = product.category;
          if (!categories[category]) {
            categories[category] = 0;
          }
          categories[category]++;
        });

        const categoryMap = {
          Fruit: "🍏",
          Vegetable: "🥦",
        };

        const categoryHTML = Object.entries(categories)
          .map(
            ([category, count]) => `
                <li class="list-group-item" data-category="${category}">
                    <span class="fruit-icon">${
                      categoryMap[category] || "🛒"
                    }</span> ${category} <span class="badge text-secondary">(${count})</span>
                </li>
            `
          )
          .join("");

        categoryList.innerHTML = categoryHTML;

        document
          .querySelectorAll("#category-list .list-group-item")
          .forEach((item) => {
            item.addEventListener("click", filterByCategory);
          });
      }

      function filterByCategory(event) {
        const selectedCategory = event.currentTarget.dataset.category;
        const filteredProducts = sampleProducts.filter(
          (product) => product.category === selectedCategory
        );

        document
          .querySelectorAll("#category-list .list-group-item")
          .forEach((item) => {
            item.classList.remove("active");
          });
        event.currentTarget.classList.add("active");

        renderProducts(filteredProducts);
      }

      function filterByAdditional(event) {
        const selectedFilter = event.target.value;
        let filteredProducts;

        if (selectedFilter === "isOrganic") {
          filteredProducts = sampleProducts.filter(
            (product) => product.isOrganic
          );
        } else if (selectedFilter === "isFresh") {
          filteredProducts = sampleProducts.filter(
            (product) => product.isFresh
          );
        } else if (selectedFilter === "isSales") {
          filteredProducts = sampleProducts.filter(
            (product) => product.isSales
          );
        } else if (selectedFilter === "isDiscount") {
          filteredProducts = sampleProducts.filter(
            (product) => product.isDiscount
          );
        } else if (selectedFilter === "isExpired") {
          filteredProducts = sampleProducts.filter(
            (product) => product.isExpired
          );
        } else {
          filteredProducts = sampleProducts;
        }

        renderProducts(filteredProducts);
      }

      function searchProducts() {
        const searchTerm = searchInput.value.toLowerCase();
        const filtered = sampleProducts.filter((product) =>
          product.name.toLowerCase().includes(searchTerm)
        );
        renderProducts(filtered);
      }

      function addToCart(productId) {
        const existingItem = cart.find((item) => item.product_id == productId);

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({ product_id: productId, quantity: 1 });
        }

        updateCartDisplay();
        saveCartToStorage();

        const button = event.target;
        if (button) {
          const originalText = button.textContent;
          button.textContent = "Added!";
          button.style.backgroundColor = "#28a745";
          button.style.color = "white";

          setTimeout(() => {
            button.textContent = originalText;
            button.style.backgroundColor = "white";
            button.style.color = "#28a745";
          }, 1000);
        }
      }

      function updateCartDisplay() {
        const totalQuantity = cart.reduce(
          (total, item) => total + item.quantity,
          0
        );
        cartCount.textContent = totalQuantity;

        if (cart.length === 0) {
          cartItems.innerHTML = `
                    <div class="text-center text-muted mt-5">
                        <i class="fas fa-shopping-cart fa-3x mb-3"></i>
                        <p>Your cart is empty</p>
                    </div>
                `;
          return;
        }

        const cartHTML = cart
          .map((item) => {
            const product = products.find((p) => p.id == item.product_id);
            if (!product) return "";

            return `
                    <div class="cart-item">
                        <div class="d-flex align-items-center justify-content-center" style="width:50px;height:50px;background:#f0f0f0;border-radius:8px;font-size:1.5rem;">
                            ${product.icon}
                        </div>
                        <div class="cart-item-name">${product.name}</div>
                        <div class="cart-item-price">$${(
                          product.price * item.quantity
                        ).toFixed(2)}</div>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="changeQuantity(${
                              product.id
                            }, 'minus')">-</button>
                            <span class="quantity-display">${
                              item.quantity
                            }</span>
                            <button class="quantity-btn" onclick="changeQuantity(${
                              product.id
                            }, 'plus')">+</button>
                        </div>
                    </div>
                `;
          })
          .join("");

        cartItems.innerHTML = cartHTML;
      }

      function changeQuantity(productId, type) {
        const itemIndex = cart.findIndex(
          (item) => item.product_id == productId
        );

        if (itemIndex >= 0) {
          if (type === "plus") {
            cart[itemIndex].quantity += 1;
          } else {
            cart[itemIndex].quantity -= 1;
            if (cart[itemIndex].quantity <= 0) {
              cart.splice(itemIndex, 1);
            }
          }
          updateCartDisplay();
          saveCartToStorage();
        }
      }

      function saveCartToStorage() {
        localStorage.setItem("cart", JSON.stringify(cart));
      }

      function loadCartFromStorage() {
        const savedCart = localStorage.getItem("cart");
        if (savedCart) {
          cart = JSON.parse(savedCart);
          updateCartDisplay();
        }
      }

      document.getElementById("checkout").addEventListener("click", () => {
        if (cart.length === 0) {
          alert("Your cart is empty!");
          return;
        }

        const total = cart.reduce((sum, item) => {
          const product = products.find((p) => p.id == item.product_id);
          return sum + product.price * item.quantity;
        }, 0);

        alert(`Thank you for your order!\nTotal: $${total.toFixed(2)}`);
        cart = [];
        updateCartDisplay();
        saveCartToStorage();
        toggleCart();
      });

      initApp();
    </script>
  </body>
</html>
